å‡†å¤‡ç¯å¢ƒï¼š 	centos7       	3å°
è½¯ä»¶åŒ…ï¼š		apache  php   mariadb
è·å–è½¯ä»¶åŒ…ï¼š	å®˜æ–¹ç«™ç‚¹
è§„åˆ’ipåœ°å€ï¼š
	192.168.18.10 		        apache.service
	192.168.18.15			php.service
	192.168.18.50			mariadb.service

ä¸€ã€éƒ¨ç½²webç«™ç‚¹
	(1)å®‰è£…ä¾èµ–
		yum -y install wget make gcc gcc-c++ pcre openssl openssl-devel zlib unzip  
		yum -y install cmake ncurses-devel libjpeg libjpeg-devel libpng libpng-devel libxml2 
		yum -y install libxml2-devel curl-devel libtool libtool-ltdl libtool-ltdl-devel libevent libevent-devel 
		yum -y install zlib-static zlib-devel autoconf pcre-devel gd perl  expat-devel 
	(2)è·å–è½¯ä»¶åŒ…
		wget -O /usr/local/apache1/apr/apr-1.7.0.tar.gz https://mirror.bit.edu.cn/apache//apr/apr-1.7.0.tar.gz
		wget -O /usr/local/apache1/apr/apr-util-1.6.1.tar.gz https://mirror.bit.edu.cn/apache//apr/apr-util-1.6.1.tar.gz
			   wget -O /usr/local/apache1/apache/httpd-2.4.41.tar.gz https://mirror.bit.edu.cn/apache//httpd/httpd-2.4.41.tar.gz
	   (3)å®‰è£…apache
		ğŸ•å®‰è£…apr
			cd /usr/local/apache1/apr
			tar xf apr-1.7.0.tar.gz && cd apr-1.7.0
			./configure --prefix=/usr/local/apache1/apr
				make  &> /dev/null
				make install &> /dev/null
   	       ğŸ•å®‰è£…apr-util
				cd /usr/local/apache1/apr/
				tar xf apr-util-* && cd apr-util-*
				./configure --prefix=/usr/local/apache1/apr/apr-util  --with-apr=/usr/local/apache1/apr && make  && make install
		ğŸ•å®‰è£…apache
			cd /usr/local/apache1/apache
					tar xf httpd-* && cd httpd-*
					./configure --prefix=/usr/local/apache1/apache \
					--sysconfdir=/etc/httpd/ \
					--with-include-apr \
					--disable-userdir \
					--enable-headers \
					--with-mpm=worker \
					--enable-modules=most \
					--enable-so \
					--enable-deflate \
					--enable-defate=shared \
					--enable-expires-shared \
					--enable-rewrite=shared \
					--enable-static-support \
					--with-apr=/usr/local/apache1/apr/ \
					--with-apr-util=/usr/local/apache1/apr/apr-util \
					--with-ssl \
					--with-z  &> /dev/null
			make &> /dev/null
			make install 
		ğŸ•å¯åŠ¨æœåŠ¡è¿›ç¨‹
			/usr/local/apache1/apache/bin/apachectl start
	ï¼ˆ4ï¼‰é˜²ç«å¢™
			   firewall-cmd --permanent --add-port=80/tcp --zone=public 
		   firewalld-cmd --add-port=80/tcp --zone=public
	ï¼ˆ5ï¼‰æµ‹è¯•

äºŒã€ æ­å»ºphpæœåŠ¡å™¨
	  åœ°å€è§„åˆ’ï¼š192.168.18.15			php.service
	  (1)å®‰è£…ä¾èµ–
		yum -y install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel
		yum -y install ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel
		yum -y install krb5 krb5-devel libidn libidn-devel openssl openssl-devel
		yum -y install zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip openldap-devel2-devel
		yum -y install gcc automake autoconf libtool make
		yum -y install gcc gcc-c++ glibc sqlite-devel libxslt-devel wget
	 (2)è·å–è½¯ä»¶åŒ…
	   wget https://downloads.php.net/~derick/php-7.4.0.tar.gz
	(3)éƒ¨ç½²php
	ã€1ã€‘åˆ›å»ºç›®å½•
	mkdir /usr/local/php74
	ã€2ã€‘ç§»åŠ¨è½¯ä»¶åˆ°ç›®å½•
	mv php-7.4.0.tar.gz /usr/local/php74
	ã€3ã€‘è§£å‹è½¯ä»¶
	tar xf php-7.4.0.tar.gz
	ã€4ã€‘é…ç½®æ¨¡å—
	cd php-7.4.0
	./configure --prefix=/usr/local/php74--with-config-file-path=/usr/local/php74/etc --with-curl --with-freetype-dir --with-gd 
	--with-iconv-dir --with-kerberos --with-libdir=lib64 --with-libxml-dir --with-mysqli --with-openssl --with-pcre-regex 
	--with-pdo-sqlite --with-pear --with-png-dir --with-jpeg-dir --with-xmlrpc --with-xsl --with-zlib --with-bz2 --enable-fpm 
	--enable-bcmath --enable-libxml --enable-inline-optimization --enable-gd-native-ttf --enable-mbregex  --with-pdo-mysql --enable-gd  
	--enable-opcache --enable-pcntl --enable-shmop --enable-soap --enable-sockets --enable-sysvsem --enable-sysvshm --enable-zip --with-ldap 
	ã€5ã€‘ç¼–è¯‘
		make 
	ã€6ã€‘ç¼–è¯‘å®‰è£…
		make install 
	ã€7ã€‘æ‹·è´phpå¯åŠ¨æ‰€éœ€è¦çš„æ–‡ä»¶
		   cp php-7.4.0/php.ini-development /usr/local/php74/etc/php.ini   
		   cp php-fpm.d/www.conf.default php-fpm.d/www.conf
		   cp php-fpm.conf.default php-fpm.conf
	 ã€8ã€‘å¯åŠ¨æœåŠ¡
		  /usr/local/php74/sbin/php-fpm    
		 ã€9ã€‘æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€å¯ é»˜è®¤ç«¯å£9000
		 ss -lnutp 
	ã€10ã€‘è®¾ç½®é˜²ç«å¢™
		firewall-cmd --permanent --add-port=9000/tcp --zone=public       æ³¨æ„ï¼šè¿™ä¸ªéœ€è¦é‡æ–°å¯åŠ¨æ‰èƒ½æœ‰æ•ˆ
		firewall-cmd --add-port=9000/tcp --zone=public    æ³¨æ„ï¼šä¸´æ—¶è®¾ç½®é˜²ç«å¢™è§„åˆ™
		
ä¸‰ã€ æ­å»ºæ•°æ®æœåŠ¡
	è§„åˆ’åœ°å€ï¼š	192.168.18.50			mariadb.service
  ï¼ˆ1ï¼‰å®‰è£…æ•°æ®åº“
		yum -y install mariadb*
  ï¼ˆ2ï¼‰å¯åŠ¨æ•°æ®
		systemctl start mariadb
  ï¼ˆ3ï¼‰åˆå§‹åŒ–æ•°æ®åº“
		mysql_secure_installation    æ³¨æ„ï¼šè¿™ä¸€æ­¥éœ€è¦è®¾ç½®å¯†ç 
  ï¼ˆ4ï¼‰ç™»é™†æ•°æ®åº“
		mysql -uroot -p

å››ã€ä¸Šé¢å·²ç»æ­å»ºå¥½æ¯å°æœåŠ¡å™¨æ‰€éœ€è¦æ­å»ºæ‰¿æ‹…çš„ä»»åŠ¡
	1ã€é…ç½®apacheæœåŠ¡å™¨
		ã€1ã€‘ä¿®æ”¹httpd.conf å¼€å¯
			å¼€å¯ä»£ç†æ¨¡å—+è™šæ‹Ÿä¸»æœº
			LoadModule proxy_module modules/mod_proxy.so
			LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so
			LoadModule vhost_alias_module modules/mod_vhost_alias.so
			ä¸»æœºåœ°å€
			ServerName 192.168.18.10:80
			æ·»åŠ ç´¢å¼•
			<IfModule dir_module>
				DirectoryIndex  index.php index.html
			</IfModule>
			æ”¯æŒphpæ¨¡å— å®šä½åˆ°   AddTypeè¿™ä¸ªä½ç½®
				AddType application/x-httpd-php  .php
				AddType application/x-httpd-php-source  .phps
			å¼€å¯è™šæ‹Ÿä¸»æœº
				# Virtual hosts
				Include /etc/httpd//extra/httpd-vhosts.conf
		ã€2ã€‘å»ºç«‹è™šæ‹Ÿä¸»æœº
			 vim /etc/httpd/extra/httpd-vhosts.conf
			<VirtualHost 192.168.18.10:80>
				ServerAdmin root@localhost.com
				DocumentRoot "/www/zblog"   
				ServerName web3.server
				ServerAlias www.web3.com
				ProxyRequests off
				ProxyPassMatch ^/(.*\.php)$ fcgi://192.168.18.15:9000/www/zblog$1
				<Directory "/www/zblog">
				Options none
				AllowOverride none
				Require all granted
				</Directory>
				ErrorLog "logs/www.web3.com-error_log"
				CustomLog "logs/www.web3.com-access_log" common
			</VirtualHost>
	2ã€é…ç½®phpæœåŠ¡å™¨
	ï¼ˆ1ï¼‰ä¿®æ”¹ç›‘å¬ipåœ°å€
		 vim /usr/local/php74/etc/php-fpm.d/www.conf
		;listen = 127.0.0.1:9000 æ”¹ 		listen = 192.168.18.15:9000
	ï¼ˆ2ï¼‰é‡æ–°å¯åŠ¨æœåŠ¡
		/usr/local/php74/sbin/php-fpm
	3ã€è®¾ç½®æ•°æ®åº“
		ï¼ˆ1ï¼‰åˆ›å»ºæ•°æ®åº“
			 create database zblog
		  ï¼ˆ2ï¼‰æˆæƒç”¨æˆ·
		MariaDB [(none)]> grant all  privileges on zblog* to zblog@192.168.18.15 identified by '123456';
	
